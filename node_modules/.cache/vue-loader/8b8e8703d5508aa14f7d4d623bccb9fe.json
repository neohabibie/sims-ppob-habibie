{"remainingRequest":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\History.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\History.vue","mtime":1757616156753},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1757611684910},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":1757611686384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBhcGkgZnJvbSAnLi4vc2VydmljZXMvYXBpJzsNCiAgZXhwb3J0IGRlZmF1bHQgew0KICAgIGRhdGEoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICB0cmFuc2FjdGlvbnM6IFtdLA0KICAgICAgICBsaW1pdDogNSwNCiAgICAgICAgb2Zmc2V0OiAwLA0KICAgICAgICBhbGxMb2FkZWQ6IGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBjcmVhdGVkKCkgew0KICAgICAgYXdhaXQgdGhpcy5sb2FkKCk7DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICBhc3luYyBsb2FkKCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoJy90cmFuc2FjdGlvbi9oaXN0b3J5Jywgew0KICAgICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0LA0KICAgICAgICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICBjb25zdCBpdGVtcyA9IChyZXMuZGF0YSAmJiByZXMuZGF0YS5kYXRhLnJlY29yZHMpID8gcmVzLmRhdGEuZGF0YS5yZWNvcmRzIDogW107DQogICAgICAgICAgdGhpcy50cmFuc2FjdGlvbnMucHVzaCguLi5pdGVtcyk7DQogICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA8IHRoaXMubGltaXQpIHRoaXMuYWxsTG9hZGVkID0gdHJ1ZTsNCiAgICAgICAgICAvLyBjb25zdCBpdGVtcyA9IHJlcy5kYXRhPy50cmFuc2FjdGlvbnMgfHwgW107DQogICAgICAgICAgLy8gdGhpcy50cmFuc2FjdGlvbnMucHVzaCguLi5pdGVtcyk7DQogICAgICAgICAgLy8gaWYgKGl0ZW1zLmxlbmd0aCA8IHRoaXMubGltaXQpIHRoaXMuYWxsTG9hZGVkID0gdHJ1ZTsNCiAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBzaG93TW9yZSgpIHsNCiAgICAgICAgdGhpcy5vZmZzZXQgKz0gdGhpcy5saW1pdDsNCiAgICAgICAgdGhpcy5sb2FkKCk7DQogICAgICB9LA0KICAgICAgZm9ybWF0RGF0ZShkKSB7DQogICAgICAgIHJldHVybiBkID8gbmV3IERhdGUoZCkudG9Mb2NhbGVTdHJpbmcoJ2lkLUlEJykgOiAnLSc7DQogICAgICB9LA0KICAgICAgZm9ybWF0QW1vdW50KGEpIHsNCiAgICAgICAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnaWQtSUQnLCB7DQogICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsDQogICAgICAgICAgY3VycmVuY3k6ICdJRFInDQogICAgICAgIH0pLmZvcm1hdChhIHx8IDApOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0K"},{"version":3,"sources":["History.vue"],"names":[],"mappings":";AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"History.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <b-row class=\"justify-content-center\">\r\n    <b-col cols=\"12\" md=\"8\">\r\n      <b-card class=\"card-elevated\">\r\n        <h5>Riwayat Transaksi</h5>\r\n        <div v-if=\"transactions.length\">\r\n          <b-list-group>\r\n            <b-list-group-item v-for=\"t in transactions\" :key=\"t.id\" class=\"d-flex justify-content-between align-items-center\">\r\n              <div>\r\n                <div style=\"font-weight:600\">{{ t.description || t.transaction_type || 'Transaksi' }}</div>\r\n                <small class=\"text-muted\">{{ formatDate(t.created_on) }}</small>\r\n              </div>\r\n              <div :class=\"t.type === 'debit' ? 'text-danger' : 'text-success'\">{{ formatAmount(t.amount) }}</div>\r\n            </b-list-group-item>\r\n          </b-list-group>\r\n        </div>\r\n        <div v-else class=\"text-center py-4 text-muted\">Belum ada transaksi</div>\r\n\r\n        <div class=\"text-center mt-3\">\r\n          <b-button v-if=\"!allLoaded\" variant=\"outline-primary\" @click=\"showMore\">Show more</b-button>\r\n        </div>\r\n      </b-card>\r\n    </b-col>\r\n  </b-row>\r\n</template>\r\n\r\n<script>\r\n  import api from '../services/api';\r\n  export default {\r\n    data() {\r\n      return {\r\n        transactions: [],\r\n        limit: 5,\r\n        offset: 0,\r\n        allLoaded: false\r\n      }\r\n    },\r\n    async created() {\r\n      await this.load();\r\n    },\r\n    methods: {\r\n      async load() {\r\n        try {\r\n          const res = await api.get('/transaction/history', {\r\n            params: {\r\n              limit: this.limit,\r\n              offset: this.offset\r\n            }\r\n          });\r\n          console.log(res);\r\n          const items = (res.data && res.data.data.records) ? res.data.data.records : [];\r\n          this.transactions.push(...items);\r\n          if (items.length < this.limit) this.allLoaded = true;\r\n          // const items = res.data?.transactions || [];\r\n          // this.transactions.push(...items);\r\n          // if (items.length < this.limit) this.allLoaded = true;\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n      },\r\n      showMore() {\r\n        this.offset += this.limit;\r\n        this.load();\r\n      },\r\n      formatDate(d) {\r\n        return d ? new Date(d).toLocaleString('id-ID') : '-';\r\n      },\r\n      formatAmount(a) {\r\n        return new Intl.NumberFormat('id-ID', {\r\n          style: 'currency',\r\n          currency: 'IDR'\r\n        }).format(a || 0);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n"]}]}