{"remainingRequest":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\TopUp.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\TopUp.vue","mtime":1757659239190},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1757611684910},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":1757611686384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBhcGkgZnJvbSAnLi4vc2VydmljZXMvYXBpJzsNCiAgaW1wb3J0IHsgYW1vdW50VmFsaWQgfSBmcm9tICcuLi91dGlscy92YWxpZGF0b3JzJzsNCg0KICBleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5vbWluYWw6ICcnLA0KICAgICAgICBwcmVzZXRzOiBbMTAwMDAsIDUwMDAwLCAxMDAwMDAsIDI1MDAwMF0NCiAgICAgIH07DQogICAgfSwNCg0KICAgIGNvbXB1dGVkOiB7DQogICAgICBpc1ZhbGlkKCkgew0KICAgICAgICByZXR1cm4gYW1vdW50VmFsaWQodGhpcy5ub21pbmFsLCAxMDAwMCwgMTAwMDAwMCk7DQogICAgICB9DQogICAgfSwNCg0KICAgIG1ldGhvZHM6IHsNCiAgICAgIGZvcm1hdChuKSB7DQogICAgICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2lkLUlEJywgew0KICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLA0KICAgICAgICAgIGN1cnJlbmN5OiAnSURSJw0KICAgICAgICB9KS5mb3JtYXQobik7DQogICAgICB9LA0KICAgICAgc2V0UHJlc2V0KG4pIHsNCiAgICAgICAgdGhpcy5ub21pbmFsID0gbjsNCiAgICAgIH0sDQogICAgICBhc3luYyBzdWJtaXRUb3BVcCgpIHsNCiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy4kYnZUb2FzdC50b2FzdCgnTm9taW5hbCB0aWRhayB2YWxpZCcsIHsNCiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLA0KICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsDQogICAgICAgICAgICBhdXRvSGlkZURlbGF5OjMwMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRyeSB7DQogICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoJy90b3B1cCcsIHsNCiAgICAgICAgICAgIHRvcF91cF9hbW91bnQ6IE51bWJlcih0aGlzLm5vbWluYWwpDQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuc3RhdHVzID09PSAwKSB7DQogICAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KHJlcy5kYXRhLm1lc3NhZ2UgfHwgJ1RvcCBVcCBiZXJoYXNpbCcsIHsNCiAgICAgICAgICAgICAgdGl0bGU6ICdTdWtzZXMnLA0KICAgICAgICAgICAgICB2YXJpYW50OiAnc3VjY2VzcycsDQogICAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6MjAwMA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9oaXN0b3J5Iik7DQogICAgICAgICAgICB9LCAyMDAwKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChyZXMuZGF0YS5tZXNzYWdlIHx8ICdUb3B1cCBnYWdhbCcsIHsNCiAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsDQogICAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLA0KICAgICAgICAgICAgICBhdXRvSGlkZURlbGF5OjMwMDANCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCg0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgNCiAgICAgICAgICAgIChlLnJlc3BvbnNlICYmIGUucmVzcG9uc2UuZGF0YSAmJiBlLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkgfHwgJ0Vycm9yIHNhYXQgdG9wdXAnLCB7DQogICAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLA0KICAgICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywNCiAgICAgICAgICAgICAgYXV0b0hpZGVEZWxheTozMDAwDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0K"},{"version":3,"sources":["TopUp.vue"],"names":[],"mappings":";AAwBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopUp.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <b-row class=\"justify-content-center\">\r\n    <b-col cols=\"12\" md=\"6\">\r\n      <b-card class=\"card-elevated\">\r\n        <h5>Top Up Saldo</h5>\r\n\r\n        <div class=\"d-flex mb-3\">\r\n          <b-form-input v-model=\"nominal\" type=\"number\" placeholder=\"Masukkan nominal (min 10.000)\" />\r\n        </div>\r\n\r\n        <div class=\"d-flex flex-wrap mb-3\">\r\n          <b-button v-for=\"p in presets\" :key=\"p\" class=\"mr-2 mb-2\" variant=\"outline-secondary\" @click=\"setPreset(p)\">\r\n            {{ format(p) }}\r\n          </b-button>\r\n        </div>\r\n        \r\n        <b-button :disabled=\"!isValid\" variant=\"primary\" block @click=\"submitTopUp\">Top Up sekarang</b-button>\r\n        \r\n      </b-card>\r\n    </b-col>\r\n  </b-row>\r\n</template>\r\n\r\n<script>\r\n  import api from '../services/api';\r\n  import { amountValid } from '../utils/validators';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        nominal: '',\r\n        presets: [10000, 50000, 100000, 250000]\r\n      };\r\n    },\r\n\r\n    computed: {\r\n      isValid() {\r\n        return amountValid(this.nominal, 10000, 1000000);\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      format(n) {\r\n        return new Intl.NumberFormat('id-ID', {\r\n          style: 'currency',\r\n          currency: 'IDR'\r\n        }).format(n);\r\n      },\r\n      setPreset(n) {\r\n        this.nominal = n;\r\n      },\r\n      async submitTopUp() {\r\n        if (!this.isValid) {\r\n          return this.$bvToast.toast('Nominal tidak valid', {\r\n            title: 'Error',\r\n            variant: 'danger',\r\n            autoHideDelay:3000\r\n          });\r\n        }\r\n\r\n        try {\r\n          const res = await api.post('/topup', {\r\n            top_up_amount: Number(this.nominal)\r\n          });\r\n\r\n          if (res.data && res.data.status === 0) {\r\n            this.$bvToast.toast(res.data.message || 'Top Up berhasil', {\r\n              title: 'Sukses',\r\n              variant: 'success',\r\n              autoHideDelay:2000\r\n            });\r\n            setTimeout(() => {\r\n              this.$router.push(\"/history\");\r\n            }, 2000);\r\n          } else {\r\n            this.$bvToast.toast(res.data.message || 'Topup gagal', {\r\n              title: 'Error',\r\n              variant: 'danger',\r\n              autoHideDelay:3000\r\n            });\r\n          }\r\n\r\n        } catch (e) {\r\n          this.$bvToast.toast(\r\n            (e.response && e.response.data && e.response.data.message) || 'Error saat topup', {\r\n              title: 'Error',\r\n              variant: 'danger',\r\n              autoHideDelay:3000\r\n            });\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>"]}]}