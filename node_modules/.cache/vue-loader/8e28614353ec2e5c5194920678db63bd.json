{"remainingRequest":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\Profile.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\Profile.vue","mtime":1757769130840},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1757611684910},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":1757611686384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBhcGkgZnJvbSAnLi4vc2VydmljZXMvYXBpJzsNCiAgaW1wb3J0IHsNCiAgICBpbWFnZVNpemVVbmRlcg0KICB9IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcnMnOw0KICBleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHByb2ZpbGU6IHt9LA0KICAgICAgICBmb3JtOiB7fSwNCiAgICAgICAgZWRpdGluZzogZmFsc2UsDQogICAgICAgIGltZ1ByZXZpZXc6IHJlcXVpcmUoJy4uL2Fzc2V0cy9kZWZhdWx0LWF2YXRhci5wbmcnKQ0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICAgIGF3YWl0IHRoaXMubG9hZFByb2ZpbGUoKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIGFzeW5jIGxvYWRQcm9maWxlKCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXQoJy9wcm9maWxlJyk7DQogICAgICAgICAgdGhpcy5wcm9maWxlID0gcmVzLmRhdGEuZGF0YSB8fCB7fTsNCiAgICAgICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgICAgICBmaXJzdF9uYW1lOiB0aGlzLnByb2ZpbGUuZmlyc3RfbmFtZSwNCiAgICAgICAgICAgIGxhc3RfbmFtZTogdGhpcy5wcm9maWxlLmxhc3RfbmFtZSwNCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLnByb2ZpbGUuZW1haWwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIGlmICh0aGlzLnByb2ZpbGUucHJvZmlsZV9pbWFnZSkgdGhpcy5pbWdQcmV2aWV3ID0gdGhpcy5wcm9maWxlLnByb2ZpbGVfaW1hZ2U7DQogICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOw0KICAgICAgICB9DQogICAgICB9LA0KDQogICAgICBzdGFydEVkaXQoKSB7DQogICAgICAgIHRoaXMuZWRpdGluZyA9IHRydWU7DQogICAgICB9LA0KDQogICAgICBjYW5jZWxFZGl0KCkgew0KICAgICAgICB0aGlzLmVkaXRpbmcgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICAgIGZpcnN0X25hbWU6IHRoaXMucHJvZmlsZS5maXJzdF9uYW1lLA0KICAgICAgICAgIGxhc3RfbmFtZTogdGhpcy5wcm9maWxlLmxhc3RfbmFtZSwNCiAgICAgICAgICBlbWFpbDogdGhpcy5wcm9maWxlLmVtYWlsDQogICAgICAgIH07DQogICAgICB9LA0KDQogICAgICBwaWNrRmlsZSgpIHsNCiAgICAgICAgdGhpcy4kcmVmcy5maWxlLmNsaWNrKCk7DQogICAgICB9LA0KDQogICAgICBhc3luYyB1cGxvYWRJbWFnZShlKSB7DQogICAgICAgIGNvbnN0IHBpY3QgPSBlLnRhcmdldC5maWxlc1swXTsNCiAgICAgICAgaWYgKCFwaWN0KSByZXR1cm47DQogICAgICAgIGlmICghaW1hZ2VTaXplVW5kZXIocGljdCwgMTAwKSkgew0KICAgICAgICAgIHJldHVybiB0aGlzLiRidlRvYXN0LnRvYXN0KCdVa3VyYW4gZmlsZSBtZWxlYmloaSAxMDAgS0InLCB7DQogICAgICAgICAgICB0aXRsZTogJ0Vycm9yJywNCiAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLA0KICAgICAgICAgICAgYXV0b0hpZGVEZWxheTozMDAwDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgICBmZC5hcHBlbmQoJ2ZpbGUnLCBwaWN0KTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkucHV0KCcvcHJvZmlsZS9pbWFnZScsIGZkKTsNCiAgICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuc3RhdHVzID09PSAwKSB7DQogICAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCdGb3RvIHByb2ZpbCBiZXJoYXNpbCBkaXVwZGF0ZScsIHsNCiAgICAgICAgICAgICAgdGl0bGU6ICdTdWtzZXMnLA0KICAgICAgICAgICAgICB2YXJpYW50OiAnc3VjY2VzcycsDQogICAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6MjAwMA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkUHJvZmlsZSgpOw0KICAgICAgICAgICAgfSwgMjAwMCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QocmVzLmRhdGEubWVzc2FnZSB8fCAnR2FnYWwgdXBkYXRlIGZvdG8nLCB7DQogICAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLA0KICAgICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywNCiAgICAgICAgICAgICAgYXV0b0hpZGVEZWxheTozMDAwDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoDQogICAgICAgICAgICAoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5kYXRhICYmIGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIHx8ICdFcnJvciB1cGxvYWQnLCB7DQogICAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLA0KICAgICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywNCiAgICAgICAgICAgICAgYXV0b0hpZGVEZWxheTozMDAwDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSwNCg0KICAgICAgYXN5bmMgc2F2ZVByb2ZpbGUoKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnB1dCgnL3Byb2ZpbGUvdXBkYXRlJywgdGhpcy5mb3JtKTsNCiAgICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuc3RhdHVzID09PSAwKSB7DQogICAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCdQcm9maWxlIGRpc2ltcGFuJywgew0KICAgICAgICAgICAgICB0aXRsZTogJ1N1a3NlcycsDQogICAgICAgICAgICAgIHZhcmlhbnQ6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgYXV0b0hpZGVEZWxheTogMjAwMCwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuZWRpdGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICB0aGlzLmxvYWRQcm9maWxlKCk7DQogICAgICAgICAgICB9LCAyMDAwKTsNCiAgICAgICAgICB9IGVsc2UgdGhpcy4kYnZUb2FzdC50b2FzdChyZXMuZGF0YS5tZXNzYWdlIHx8ICdHYWdhbCBtZW55aW1wYW4nLCB7DQogICAgICAgICAgICB0aXRsZTogJ0Vycm9yJywNCiAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLA0KICAgICAgICAgICAgYXV0b0hpZGVEZWxheTozMDAwDQogICAgICAgICAgfSk7DQogICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCdFcnJvciBtZW55aW1wYW4gcHJvZmlsZScsIHsNCiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLA0KICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsDQogICAgICAgICAgICBhdXRvSGlkZURlbGF5OjMwMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSwNCg0KICAgICAgbG9nb3V0KCkgew0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYXV0aC9sb2dvdXQnKTsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0K"},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"profile-page text-center\">\r\n    <div class=\"avatar-wrapper\">\r\n      <img :src=\"imgPreview\" class=\"avatar-img\" @click=\"pickFile\" />\r\n      <b-icon-pencil class=\"edit-icon\" @click=\"pickFile\"/>\r\n    </div>\r\n\r\n    <h4 class=\"mt-3\">{{ profile.first_name }} {{ profile.last_name }}</h4>\r\n\r\n    <p class=\"text-muted\">{{ profile.email }}</p>\r\n\r\n    <b-form @submit.prevent=\"saveProfile\" class=\"profile-form mt-4 text-left\">\r\n      <b-form-group label=\"Email\">\r\n        <b-form-input v-model=\"form.email\" type=\"email\" required></b-form-input>\r\n      </b-form-group>\r\n\r\n      <b-form-group label=\"Nama Depan\">\r\n        <b-form-input v-model=\"form.first_name\" required></b-form-input>\r\n      </b-form-group>\r\n\r\n      <b-form-group label=\"Nama Belakang\">\r\n        <b-form-input v-model=\"form.last_name\" required></b-form-input>\r\n      </b-form-group>\r\n\r\n      <b-button type=\"submit\" variant=\"danger\" block>Edit Profil</b-button>\r\n      <b-button variant=\"outline-danger\" block class=\"mt-3\" @click=\"logout\">Logout</b-button>\r\n    </b-form>\r\n\r\n    <input ref=\"file\" type=\"file\" accept=\"image/*\" style=\"display:none\" @change=\"uploadImage\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import api from '../services/api';\r\n  import {\r\n    imageSizeUnder\r\n  } from '../utils/validators';\r\n  export default {\r\n    data() {\r\n      return {\r\n        profile: {},\r\n        form: {},\r\n        editing: false,\r\n        imgPreview: require('../assets/default-avatar.png')\r\n      }\r\n    },\r\n    async created() {\r\n      await this.loadProfile();\r\n    },\r\n    methods: {\r\n      async loadProfile() {\r\n        try {\r\n          const res = await api.get('/profile');\r\n          this.profile = res.data.data || {};\r\n          this.form = {\r\n            first_name: this.profile.first_name,\r\n            last_name: this.profile.last_name,\r\n            email: this.profile.email\r\n          };\r\n          if (this.profile.profile_image) this.imgPreview = this.profile.profile_image;\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n      },\r\n\r\n      startEdit() {\r\n        this.editing = true;\r\n      },\r\n\r\n      cancelEdit() {\r\n        this.editing = false;\r\n        this.form = {\r\n          first_name: this.profile.first_name,\r\n          last_name: this.profile.last_name,\r\n          email: this.profile.email\r\n        };\r\n      },\r\n\r\n      pickFile() {\r\n        this.$refs.file.click();\r\n      },\r\n\r\n      async uploadImage(e) {\r\n        const pict = e.target.files[0];\r\n        if (!pict) return;\r\n        if (!imageSizeUnder(pict, 100)) {\r\n          return this.$bvToast.toast('Ukuran file melebihi 100 KB', {\r\n            title: 'Error',\r\n            variant: 'danger',\r\n            autoHideDelay:3000\r\n          });\r\n        }\r\n\r\n        const fd = new FormData();\r\n        fd.append('file', pict);\r\n        try {\r\n          const res = await api.put('/profile/image', fd);\r\n          if (res.data && res.data.status === 0) {\r\n            this.$bvToast.toast('Foto profil berhasil diupdate', {\r\n              title: 'Sukses',\r\n              variant: 'success',\r\n              autoHideDelay:2000\r\n            });\r\n            setTimeout(() => {\r\n              this.loadProfile();\r\n            }, 2000);\r\n          } else {\r\n            this.$bvToast.toast(res.data.message || 'Gagal update foto', {\r\n              title: 'Error',\r\n              variant: 'danger',\r\n              autoHideDelay:3000\r\n            });\r\n          }\r\n        } catch (err) {\r\n          this.$bvToast.toast(\r\n            (err.response && err.response.data && err.response.data.message) || 'Error upload', {\r\n              title: 'Error',\r\n              variant: 'danger',\r\n              autoHideDelay:3000\r\n            });\r\n        }\r\n      },\r\n\r\n      async saveProfile() {\r\n        try {\r\n          const res = await api.put('/profile/update', this.form);\r\n          if (res.data && res.data.status === 0) {\r\n            this.$bvToast.toast('Profile disimpan', {\r\n              title: 'Sukses',\r\n              variant: 'success',\r\n              autoHideDelay: 2000,\r\n            });\r\n            setTimeout(() => {\r\n              this.editing = false;\r\n              this.loadProfile();\r\n            }, 2000);\r\n          } else this.$bvToast.toast(res.data.message || 'Gagal menyimpan', {\r\n            title: 'Error',\r\n            variant: 'danger',\r\n            autoHideDelay:3000\r\n          });\r\n        } catch (e) {\r\n          this.$bvToast.toast('Error menyimpan profile', {\r\n            title: 'Error',\r\n            variant: 'danger',\r\n            autoHideDelay:3000\r\n          });\r\n        }\r\n      },\r\n\r\n      logout() {\r\n        this.$store.dispatch('auth/logout');\r\n        this.$router.push('/login');\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .profile-page {\r\n    max-width: 600px;\r\n    margin: 0 auto;\r\n    padding: 40px 20px;\r\n  }\r\n  .avatar-wrapper {\r\n    position: relative;\r\n    display: inline-block;\r\n  }\r\n  .avatar-img {\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n    object-fit: cover;\r\n    cursor: pointer;\r\n    border: 3px solid #eee;\r\n  }\r\n  .edit-icon {\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 0;\r\n    background: #fff;\r\n    border-radius: 50%;\r\n    padding: 5px;\r\n    font-size: 30px;\r\n    border: 1px solid #ddd;\r\n    cursor: pointer;\r\n  }\r\n  .profile-form {\r\n    margin-top: 30px;\r\n}\r\n</style>"]}]}