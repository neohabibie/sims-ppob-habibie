{"remainingRequest":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\Payment.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\Payment.vue","mtime":1757612150178},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1757611684910},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":1757611686384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgYXBpIGZyb20gJy4uL3NlcnZpY2VzL2FwaSc7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsgcmV0dXJuIHsgc2VydmljZTpudWxsIH07IH0sDQogIGNvbXB1dGVkOnsgcHJpY2VEaXNwbGF5KCl7IHJldHVybiB0aGlzLnNlcnZpY2UgPyBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2lkLUlEJyx7c3R5bGU6J2N1cnJlbmN5JyxjdXJyZW5jeTonSURSJ30pLmZvcm1hdCh0aGlzLnNlcnZpY2UucHJpY2UpIDogJyc7IH0gfSwNCiAgYXN5bmMgY3JlYXRlZCgpew0KICAgIGNvbnN0IHNpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnNlcnZpY2VJZDsNCiAgICBpZiAoIXNpZCkgcmV0dXJuOw0KICAgIHRyeSB7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuZ2V0KCcvc2VydmljZXMnKTsNCiAgICAgIC8vIGNvbnN0IHNlcnZpY2VzID0gcmVzLmRhdGE/LnNlcnZpY2VzIHx8IFtdOw0KICAgICAgY29uc3Qgc2VydmljZXMgPSAocmVzLmRhdGEgJiYgcmVzLmRhdGEuc2VydmljZXMpID8gcmVzLmRhdGEuc2VydmljZXMgOiBbXTsNCiAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2VzLmZpbmQocz0+U3RyaW5nKHMuaWQpID09PSBTdHJpbmcoc2lkKSk7DQogICAgfSBjYXRjaChlKXsgY29uc29sZS5lcnJvcihlKTsgfQ0KICB9LA0KICBtZXRob2RzOnsNCiAgICBhc3luYyBkb1BheW1lbnQoKXsNCiAgICAgIGlmKCF0aGlzLnNlcnZpY2UpIHJldHVybjsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KCcvdHJhbnNhY3Rpb24nLCB7IHNlcnZpY2VJZDogdGhpcy5zZXJ2aWNlLmlkIH0pOw0KICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoJ1BlbWJheWFyYW4gc3Vrc2VzJyx7dGl0bGU6J1N1a3NlcycsdmFyaWFudDonc3VjY2Vzcyd9KTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2hpc3RvcnknKTsNCiAgICAgICAgfSBlbHNlIHRoaXMuJGJ2VG9hc3QudG9hc3QocmVzLmRhdGEubWVzc2FnZSB8fCAnR2FnYWwgYmF5YXInLHt0aXRsZTonRXJyb3InLHZhcmlhbnQ6J2Rhbmdlcid9KTsNCiAgICAgIH0gY2F0Y2goZSl7IHRoaXMuJGJ2VG9hc3QudG9hc3QoJ0Vycm9yIHNhYXQgcGVtYmF5YXJhbicse3RpdGxlOidFcnJvcicsdmFyaWFudDonZGFuZ2VyJ30pOyB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Payment.vue"],"names":[],"mappings":";AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Payment.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <b-row class=\"justify-content-center\">\r\n    <b-col cols=\"12\" md=\"6\">\r\n      <b-card class=\"card-elevated\">\r\n        <div v-if=\"service\">\r\n          <h5>Konfirmasi Pembayaran</h5>\r\n          <div class=\"mb-2\"><strong>{{ service.name }}</strong></div>\r\n          <div class=\"mb-3\">Total: <span style=\"font-weight:700\">{{ priceDisplay }}</span></div>\r\n\r\n          <b-button variant=\"success\" block @click=\"doPayment\">Bayar Sekarang</b-button>\r\n        </div>\r\n        <div v-else>\r\n          <p>Service belum dipilih. Kembali ke Home untuk memilih layanan.</p>\r\n          <b-button @click=\"$router.push('/home')\">Kembali ke Home</b-button>\r\n        </div>\r\n      </b-card>\r\n    </b-col>\r\n  </b-row>\r\n</template>\r\n\r\n<script>\r\nimport api from '../services/api';\r\nexport default {\r\n  data(){ return { service:null }; },\r\n  computed:{ priceDisplay(){ return this.service ? new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR'}).format(this.service.price) : ''; } },\r\n  async created(){\r\n    const sid = this.$route.query.serviceId;\r\n    if (!sid) return;\r\n    try {\r\n      const res = await api.get('/services');\r\n      // const services = res.data?.services || [];\r\n      const services = (res.data && res.data.services) ? res.data.services : [];\r\n      this.service = services.find(s=>String(s.id) === String(sid));\r\n    } catch(e){ console.error(e); }\r\n  },\r\n  methods:{\r\n    async doPayment(){\r\n      if(!this.service) return;\r\n      try {\r\n        const res = await api.post('/transaction', { serviceId: this.service.id });\r\n        if (res.data && res.data.success) {\r\n          this.$bvToast.toast('Pembayaran sukses',{title:'Sukses',variant:'success'});\r\n          this.$router.push('/history');\r\n        } else this.$bvToast.toast(res.data.message || 'Gagal bayar',{title:'Error',variant:'danger'});\r\n      } catch(e){ this.$bvToast.toast('Error saat pembayaran',{title:'Error',variant:'danger'}); }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}