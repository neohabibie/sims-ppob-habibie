{"remainingRequest":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\TopUp.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\src\\views\\TopUp.vue","mtime":1757617876836},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1757611684910},{"path":"C:\\xampp\\htdocs\\his-ppob-vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":1757611686384}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBhcGkgZnJvbSAnLi4vc2VydmljZXMvYXBpJzsNCiAgaW1wb3J0IHsNCiAgICBhbW91bnRWYWxpZA0KICB9IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcnMnOw0KICBleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5vbWluYWw6ICcnLA0KICAgICAgICBwcmVzZXRzOiBbMTAwMDAsIDUwMDAwLCAxMDAwMDAsIDI1MDAwMF0NCiAgICAgIH07DQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgaXNWYWxpZCgpIHsNCiAgICAgICAgcmV0dXJuIGFtb3VudFZhbGlkKHRoaXMubm9taW5hbCwgMTAwMDAsIDEwMDAwMDApOw0KICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgZm9ybWF0KG4pIHsNCiAgICAgICAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnaWQtSUQnLCB7DQogICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsDQogICAgICAgICAgY3VycmVuY3k6ICdJRFInDQogICAgICAgIH0pLmZvcm1hdChuKTsNCiAgICAgIH0sDQogICAgICBzZXRQcmVzZXQobikgew0KICAgICAgICB0aGlzLm5vbWluYWwgPSBuOw0KICAgICAgfSwNCiAgICAgIGFzeW5jIHN1Ym1pdFRvcFVwKCkgew0KICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLiRidlRvYXN0LnRvYXN0KCdOb21pbmFsIHRpZGFrIHZhbGlkJywgew0KICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsDQogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIHRyeSB7DQogICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLnBvc3QoJy90b3B1cCcsIHsNCiAgICAgICAgICAgIHRvcF91cF9hbW91bnQ6IE51bWJlcih0aGlzLm5vbWluYWwpDQogICAgICAgICAgfSk7DQogICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLnN0YXR1cyA9PT0gMCkgew0KICAgICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChyZXMuZGF0YS5tZXNzYWdlIHx8ICdUb3AgVXAgYmVyaGFzaWwnLCB7DQogICAgICAgICAgICAgIHRpdGxlOiAnU3Vrc2VzJywNCiAgICAgICAgICAgICAgdmFyaWFudDogJ3N1Y2Nlc3MnDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKCcvaGlzdG9yeScpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KHJlcy5kYXRhLm1lc3NhZ2UgfHwgJ1RvcHVwIGdhZ2FsJywgew0KICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yJywNCiAgICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoDQogICAgICAgICAgICAoZS5yZXNwb25zZSAmJiBlLnJlc3BvbnNlLmRhdGEgJiYgZS5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIHx8ICdFcnJvciBzYWF0IHRvcHVwJywgew0KICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yJywNCiAgICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQo="},{"version":3,"sources":["TopUp.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopUp.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <b-row class=\"justify-content-center\">\r\n    <b-col cols=\"12\" md=\"6\">\r\n      <b-card class=\"card-elevated\">\r\n        <h5>Top Up Saldo</h5>\r\n        <div class=\"d-flex mb-3\">\r\n          <b-form-input v-model=\"nominal\" type=\"number\" placeholder=\"Masukkan nominal (min 10.000)\" />\r\n        </div>\r\n        <div class=\"d-flex flex-wrap mb-3\">\r\n          <b-button v-for=\"p in presets\" :key=\"p\" class=\"mr-2 mb-2\" variant=\"outline-secondary\" @click=\"setPreset(p)\">\r\n            {{ format(p) }}\r\n          </b-button>\r\n        </div>\r\n        <b-button :disabled=\"!isValid\" variant=\"primary\" block @click=\"submitTopUp\">Top Up sekarang</b-button>\r\n      </b-card>\r\n    </b-col>\r\n  </b-row>\r\n</template>\r\n<script>\r\n  import api from '../services/api';\r\n  import {\r\n    amountValid\r\n  } from '../utils/validators';\r\n  export default {\r\n    data() {\r\n      return {\r\n        nominal: '',\r\n        presets: [10000, 50000, 100000, 250000]\r\n      };\r\n    },\r\n    computed: {\r\n      isValid() {\r\n        return amountValid(this.nominal, 10000, 1000000);\r\n      }\r\n    },\r\n    methods: {\r\n      format(n) {\r\n        return new Intl.NumberFormat('id-ID', {\r\n          style: 'currency',\r\n          currency: 'IDR'\r\n        }).format(n);\r\n      },\r\n      setPreset(n) {\r\n        this.nominal = n;\r\n      },\r\n      async submitTopUp() {\r\n        if (!this.isValid) {\r\n          return this.$bvToast.toast('Nominal tidak valid', {\r\n            title: 'Error',\r\n            variant: 'danger'\r\n          });\r\n        }\r\n        try {\r\n          const res = await api.post('/topup', {\r\n            top_up_amount: Number(this.nominal)\r\n          });\r\n          if (res.data && res.data.status === 0) {\r\n            this.$bvToast.toast(res.data.message || 'Top Up berhasil', {\r\n              title: 'Sukses',\r\n              variant: 'success'\r\n            });\r\n            // this.$router.push('/history');\r\n          } else {\r\n            this.$bvToast.toast(res.data.message || 'Topup gagal', {\r\n              title: 'Error',\r\n              variant: 'danger'\r\n            });\r\n          }\r\n        } catch (e) {\r\n          this.$bvToast.toast(\r\n            (e.response && e.response.data && e.response.data.message) || 'Error saat topup', {\r\n              title: 'Error',\r\n              variant: 'danger'\r\n            });\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>"]}]}